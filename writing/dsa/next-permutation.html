 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../writing/writing.css">
  <title>Josh Peters - Next Permutation</title>
  <link rel="icon" type="image/png" href="../../resources/favicon.png" />
  <script src="https://kit.fontawesome.com/77b1d2e451.js" crossorigin="anonymous"></script>
  <script defer src="../../components/aside.js"></script>
  <script defer src="../../components/footer.js"></script>
  <style>
    pre {
      color: #FDFDFF;
      padding: 1rem;
      border-radius: 8px;
      font-family: monospace;
      white-space: pre-wrap;
    }
    .highlight {
      color: #86D4DE;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="body-container">
    <my-aside></my-aside>
    <main>
      <h1 class="desktop-header">JOSH PETERS</h1>
      <div class="content-container">
        <h2 class="article-title">Next Permutation</h2>
        <sub class="article-date">August 20, 2025</sub>
        <div class="text-body">
                  
          <p>This is the solution to the <a href="https://leetcode.com/problems/next-permutation/" class="leetcode-link" style="text-decoration: underline;">Next Permutation</a> LeetCode problem.</p>

          <p>Since I am using <span style="color: #86D4DE;">Golang</span> I will need to import the <i>slices</i> and <i>reflect</i> packages from the standard library.</p>

          <pre class="go-code">
import (
    "slices"
    "reflect"
)
          </pre>
          
          <p><b>Step 1 - Find the pivot (valley)</b><br>First, we scan the array from right to left, looking for the first position where a number is smaller than the number immediately after it. This marks the point where the increasing order (from the right side) breaks. We'll call this position the <i>valley</i>, since it's the point where the next permutation can be formed.</p>

          <pre class="go-code">
valley := -1

for i := len(nums) - 2; i >= 0; i-- {
    num := nums[i]
    numAfter := nums[i + 1]
    if num < numAfter {
        valley = i
        break
    }
}
          </pre>

          <p><b>Step 2 - Handle the descending case</b><br>If no such position or <i>valley</i> is found, it means the array is in descending order, which is the largest possible permutation. In this case, the next permutation is simply the smallest one &#8212; so we reverse the entire array and return.</p>

          <pre class="go-code">
if valley == -1 {
    slices.Reverse(nums)
    return
}
          </pre>

          <p><b>Step 3 - Find the next larger number to swap</b><br>Otherwise, once we’ve found the <i>valley</i>, we need to increase the number at that position just enough to make the sequence larger, but still as small as possible. To do this, we scan from the end of the array again, looking for the first number that is greater than the number at the <i>valley</i> index. We’ll call this the <i>nextHigher</i> number.</p>

          <pre class="go-code">
nextHigher := len(nums) - 1
for nums[nextHigher] <= nums[valley] {
    nextHigher--
}
          </pre>

          <p><b>Step 4 - Swap</b><br>Next, we swap the number at the valley index with the <i>nextHigher</i> number. This guarantees that we’re making the smallest possible increase to the sequence.</p>

          <pre class="go-code">
swapFunc := reflect.Swapper(nums)
swapFunc(valley, nextHigher)
          </pre>

          <p><b>Step 5 - Reverse the suffix</b><br>Finally, the part of the array to the right of the valley index is still in descending order. To complete the next permutation, we reverse this suffix, which puts it into ascending order and ensures the result is the smallest possible sequence greater than the original.</p>

          <pre class="go-code">
slices.Reverse(nums[valley + 1:])
          </pre>
          
          <p><b>Time Complexity</b> = <i>O(n)</i> (where <i>n</i> is the size of the array).</p>
          <p><b>Space Complexity</b> = <i>O(1)</i> (array is modified in-place, no additional data structures are created).</p>
        </div>
      <my-footer>
        <i class="fa-solid fa-envelope" slot="email-logo"></i>
        <i class="fa-brands fa-github" slot="github-logo"></i>
        <i class="fa-brands fa-linkedin" slot="linkedin-logo"></i>
      </my-footer>
    </main>
  </div>

  <script type="module">
    import { applyHighlights } from "../../scripts/code-highlights.js";

    document.addEventListener("DOMContentLoaded", applyHighlights);
  </script>
</body>
</html>
